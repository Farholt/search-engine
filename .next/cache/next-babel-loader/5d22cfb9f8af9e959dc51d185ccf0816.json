{"ast":null,"code":"const sqlite3 = require('sqlite3');\n\nconst sqlite = require('sqlite');\n\nconst getUserExceptMainUserMovies = async (id, subId) => {\n  /* DB connection */\n  const db = await sqlite.open({\n    filename: './mydb.sqlite',\n    driver: sqlite3.Database\n  });\n  return await db.all('SELECT ratings.movieId, title, ratings.rating FROM ratings, users, movies WHERE users.id = userId AND movies.id = movieId AND users.id = ? AND movieId NOT IN (SELECT ratings.movieId FROM ratings, users, movies WHERE users.id = userId AND movies.id = movieId AND users.id = ?)', [subId, id]);\n};\n\nexport default getUserExceptMainUserMovies;","map":{"version":3,"sources":["C:/Users/fredr/Documents/Universitet/HT20/2DV515 - Web Intelligence/A1/sql/getUserExceptMainUserMovies.js"],"names":["sqlite3","require","sqlite","getUserExceptMainUserMovies","id","subId","db","open","filename","driver","Database","all"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAME,2BAA2B,GAAG,OAAOC,EAAP,EAAWC,KAAX,KAAqB;AACrD;AACA,QAAMC,EAAE,GAAG,MAAMJ,MAAM,CAACK,IAAP,CAAY;AACzBC,IAAAA,QAAQ,EAAE,eADe;AAEzBC,IAAAA,MAAM,EAAET,OAAO,CAACU;AAFS,GAAZ,CAAjB;AAKA,SAAO,MAAMJ,EAAE,CAACK,GAAH,CAAO,qRAAP,EAA8R,CAACN,KAAD,EAAQD,EAAR,CAA9R,CAAb;AACH,CARD;;AAUA,eAAeD,2BAAf","sourcesContent":["const sqlite3 = require('sqlite3');\r\nconst sqlite = require('sqlite');\r\n\r\nconst getUserExceptMainUserMovies = async (id, subId) => {\r\n    /* DB connection */\r\n    const db = await sqlite.open({\r\n        filename: './mydb.sqlite',\r\n        driver: sqlite3.Database\r\n    });\r\n\r\n    return await db.all('SELECT ratings.movieId, title, ratings.rating FROM ratings, users, movies WHERE users.id = userId AND movies.id = movieId AND users.id = ? AND movieId NOT IN (SELECT ratings.movieId FROM ratings, users, movies WHERE users.id = userId AND movies.id = movieId AND users.id = ?)', [subId, id])\r\n}\r\n\r\nexport default getUserExceptMainUserMovies;"]},"metadata":{},"sourceType":"module"}